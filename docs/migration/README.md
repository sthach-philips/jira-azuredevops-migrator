# Jira to Azure DevOps Migration

## Migration Preparation: Mapping Jira Fields to Azure DevOps Fields
1. **Confirm Jira to Azure DevOps Field Mapping**:
    - Map Jira Backend IDs to Azure DevOps Reference Names.
    - Review Azure DevOps Field Reference documentation [here](https://learn.microsoft.com/en-us/azure/devops/boards/work-items/guidance/work-item-field?view=azure-devops).
    - Utilize scripts located in the `src/Scripts` folder:
        - `GetJiraFields.linq`: Retrieves Jira mappings.
        - `GetJiraProjectIssueFieldMapping.linq`: Retrieves Jira project-to-issue-to-field mappings.
        - `GetJiraTicketWithAllFields.linq`: Retrieves all issues in Jira for specified projects, including their usage and dropdown values.
        - `GetAzureDevopsFields.linq`: Retrieves all fields for the target Azure DevOps organization.
    - **Manual Mapping**: Perform the mapping of Jira fields to Azure DevOps equivalents manually.
        - Refer to the `JiraToAzure-Fields` tab in `JiraAzureFieldMappings.xlsx` to review pre-populated mappings for **Phase 1** of the BSD Migration.

2. **Creating Custom Fields**:
    - Determine which custom Jira fields will be migrated.
    - Use the `Azure-Fields` tab to map fields, including AzureFieldDisplayName, AzureFieldReferenceName, and AzureFieldType.
    - Create custom fields in Azure DevOps either:
        - Manually, one by one.
        - Using the `CreateAzureDevOpsCustomFields.linq` script for bulk creation. This script:
            - Requires an access token with full permissions for the boards.
            - Checks for duplicates based on **AzureFieldReferenceName**.
            - Generates output to flag **errors** or unintended duplicates.

> ⚠️ **Important**: Ensure you have the correct permissions before proceeding.
>
> ![AzurePermissions](org-level-permissions.jfif)

## Configuration Setup
1. **Overview**:
    - Follow recommendations from the [FAQ](..\faq.md), **Section 6: Scenario 2**.
    - Create configuration files for the azure-devops-migrator tool using the `JiraToAzure-Fields` mapping tab.
    - Begin with a base configuration file (`config-scrum-philips-base.config`). This file:
        - Excludes **link-map**, **field-map**, and **type-map** nodes, as these are generated by scripts.
        - Is located in the `src\scripts` folder

2. **Automating Configuration Creation**:
    - Use the `CreateMigrationConfigFile.linq` script to:
        - Pull base configuration details.
        - Generate the **type-map** node based on the **JiraToAzure-Issue** mapping tab.
        - Generate the **link-map** node based on the **Jira-IssueNavigationDirection** mapping tab.
        - Generate the **field-map** node based on the **JiraToAzure-Fields** mapping tab:
            - Skips mappings where **WillMap** is null, empty, or set to zero.
            - Uses **AzureDevopMigratorMapperType** to determine the mapping logic (explained below).

### AzureDevopMigratorMapperType Custom Logic
- **BaseConfigurationOption**:
    - Indicates the field is already defined in other configuration sections or options within the `config-scrum-philips-base.config` file.
    - Mapping will be skipped if **AzureDevopMigratorMapperType** is set to **BaseConfigurationOption**.

- **CustomConfigurationOption**:
    - Represents custom mappings requiring manual definitions, typically through key-value pairs.
    - The mappings are located in the **JiraToAzureCustomMaps** tab.
    - The script includes logic to handle these mappings:
        - Functions embedded within the script provide support for this logic.
        - Warnings and exceptions are flagged in output where applicable.

- For other mapper types, refer to detailed descriptions in the [config readme](..\config.md).

## Migration Process
1. Begin migration using instructions provided in the [overview readme](..\overview.md).
2. Ensure all mapping configurations are correctly set up before proceeding.